import{k as U,r as B,c as st,E as l,F as a,J as s,S as A,u as t,L as k,H as b,I as F,V as S,M as f,P as E,Q as i,y as et,O as n,T as h}from"./wzry-wzry_vue-BEC82j21.js";import{u as at,L as ot,S as lt}from"./wzry-useLotteryPlay-bxUFH2Bh.js";import{s as z}from"./wzry-wzry_vuePlugin-DfAOYnI4.js";import{bj as it,A as nt,a2 as rt,a as G,F as p,G as r,bk as K,bl as dt,b as O,M as x,y as T,x as d,p as j,e as ut}from"./wzry-index-CTpLHwAa.js";import"./wzry-index-BrrdO2Ct.js";import"./wzry-index-B-RbYMYs.js";import"./wzry-index-CtFj8Xvm.js";import"./wzry-wzry_axios-ChA_wbf5.js";import"./wzry-wzry_dayjs-RHYc_Oz-.js";import"./wzry-wzry_lodash-BosuxZz1.js";import"./wzry-wzry_pinyin_pro-BOs0bO5i.js";import"./wzry-wzry_i18n-D3aQbx8W.js";import"./wzry-wzry_vueuse-Dl7OonR3.js";const ct={class:"play-area"},_t={class:"double-status"},pt={key:0,class:"status"},vt=["src"],mt={key:1,class:"status"},yt=["src"],kt={class:"fix-position"},bt={class:"award"},ft={key:0,class:"tag"},Et=["src"],Ot={class:"text"},xt={class:"spin"},Tt={class:"content"},gt={class:"luck"},Rt={class:"luck-value"},Lt=["data-text"],Ct={class:"base"},wt=["src"],Nt=["src"],At=["src"],St=["src"],ht=U({__name:"index",setup(q){const v=it(),I=nt(),H=rt(),{setLuckValue:$,resetHeroLuck:J}=v,{hero_lucky:g}=z(v),{user_data:P}=z(I),{gift_index:m,getLotteryIndex:M,last_reward_position:u,checkAloneNotCount:Q,setLastPosition:W,have_alone_free:y,have_multiple_free:R,have_alone_discount:L,have_multiple_discount:C,calcAloneReward:X,calcMultipleReward:Z,checkMultipleNotCount:tt}=at("HERO"),c=B(),w=B(0),Y=st(()=>H.config.lotteryAnimation),N=async()=>{Q()||(M(),await d(),w.value=2,await d(),c.value=u.value-u.value%360+m.value*36+360*2,await d(2e3),W(c.value),$("HERO"),X())},D=V=>{if(tt(V,N))return;const e=[],o=async()=>{if(await d(),w.value=1,await d(),c.value=u.value-u.value%360+m.value*36+360*1,await d(Y.value?1e3:0),$("HERO"),K.HERO[m.value].type==="KING_CRYSTAL"&&J(),u.value=c.value,e.push(m.value),M(),e.length<5){setTimeout(o,Y.value?250:0);return}Z(e)};o()};return(V,e)=>(a(),l("div",ct,[s("div",_t,[t(P).doubleGoldCardExpireTime!==0?(a(),l("div",pt,[s("img",{src:t(G)("double_gold_status"),alt:"",class:"icon"},null,8,vt),e[2]||(e[2]=s("span",{class:"text"},"×2倍",-1))])):A("",!0),t(P).doubleExpCardExpireTime!==0?(a(),l("div",mt,[s("img",{src:t(G)("double_exp_status"),alt:"",class:"icon"},null,8,yt),e[3]||(e[3]=s("span",{class:"text"},"×2倍",-1))])):A("",!0)]),s("div",kt,[s("div",{class:"turntable",style:k({transform:`rotate(${-c.value}deg)`,transitionDuration:w.value+"s"})},[s("div",bt,[(a(!0),l(b,null,F(t(K).HERO,(o,_)=>(a(),l("div",{key:_,class:"award-item",style:k(`--i:${_}`)},[o.num?(a(),l("div",ft,S(o.num),1)):A("",!0),s("img",{src:t(p)(t(r).ICON[o.type]),alt:"",class:"icon"},null,8,Et),s("div",Ot,S(t(r).NAME[o.type]),1)],4))),128))])],4),e[5]||(e[5]=s("div",{class:"turntable-mask"},null,-1)),s("div",xt,[s("div",Tt,[s("div",gt,[s("div",Rt,[s("div",{class:"value","data-text":t(g)},S(t(g)),9,Lt)]),e[4]||(e[4]=s("div",{class:"luck-label","data-text":"幸运值"},"幸运值",-1))])]),s("div",{class:"waves",style:k(`--height:${t(g)/t(dt).hero[1]*100}%`)},[(a(),l(b,null,F(50,(o,_)=>s("div",{key:_,style:k({animationDelay:_*.05+"s"}),class:"wave"},null,4)),64))],4)])]),s("div",Ct,[t(y)?(a(),l(b,{key:0},[f((a(),E(t(T),{disabled:!t(y),class:"k-button",type:"warning",onClick:N},{default:i(()=>[s("img",{src:t(p)(t(r).ICON.HERO_LOTTERY_COIN),alt:"",class:"icon"},null,8,wt),e[6]||(e[6]=s("span",{class:"num"},"×1",-1)),e[7]||(e[7]=s("div",{class:"text"},"夺宝一次",-1))]),_:1,__:[6,7]},8,["disabled"])),[[t(O),{disabled:!t(y),text:t(y)?"":t(x).zk84}]]),f((a(),E(t(T),{disabled:!t(R),class:"k-button",type:"warning",onClick:e[0]||(e[0]=o=>D("FREE"))},{default:i(()=>[s("img",{src:t(p)(t(r).ICON.HERO_LOTTERY_COIN),alt:"",class:"icon"},null,8,Nt),e[8]||(e[8]=s("span",{class:"num"},"×5",-1)),e[9]||(e[9]=s("div",{class:"text"},"夺宝五次",-1))]),_:1,__:[8,9]},8,["disabled"])),[[t(O),{disabled:!t(R),text:t(R)?"":t(x).c2y9}]])],64)):(a(),l(b,{key:1},[f((a(),E(t(T),{disabled:!t(L),class:"k-button",type:"warning",onClick:N},{default:i(()=>[s("img",{src:t(p)(t(r).ICON.HERO_LOTTERY_STONE),alt:"",class:"icon"},null,8,At),e[10]||(e[10]=s("span",{class:"num"},"×1",-1)),e[11]||(e[11]=s("div",{class:"text"},"夺宝一次",-1))]),_:1,__:[10,11]},8,["disabled"])),[[t(O),{disabled:!t(L),text:t(L)?"":t(x).zk84}]]),f((a(),E(t(T),{disabled:!t(C),class:"k-button",type:"warning",onClick:e[1]||(e[1]=o=>D("DEDUCTION"))},{default:i(()=>[s("img",{src:t(p)(t(r).ICON.HERO_LOTTERY_STONE),alt:"",class:"icon"},null,8,St),e[12]||(e[12]=s("span",{class:"num"},"×5",-1)),e[13]||(e[13]=s("div",{class:"text"},"夺宝五次",-1))]),_:1,__:[12,13]},8,["disabled"])),[[t(O),{disabled:!t(C),text:t(C)?"":t(x).c2y9}]])],64))])]))}}),It=j(ht,[["__scopeId","data-v-0cd73ee1"]]),Ht={class:"seize-treasures"},$t={class:"main"},Pt=U({name:"LotteryHero",__name:"index",setup(q){const{playAudio:v}=ut();return et(()=>{v("bq69")}),(I,H)=>(a(),l("div",Ht,[n(h,{name:"to-bottom",appear:""},{default:i(()=>[n(ot,{type:"HERO"})]),_:1}),s("div",$t,[n(h,{name:"to-right-opacity",appear:""},{default:i(()=>[n(It)]),_:1}),n(h,{name:"to-left-opacity",appear:""},{default:i(()=>[n(lt,{type:"HERO"})]),_:1})])]))}}),Qt=j(Pt,[["__scopeId","data-v-272c7f17"]]);export{Qt as default};
