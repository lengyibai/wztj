import{o as ue,k as V,r as $,c as S,M as x,u as l,E as o,F as e,J as t,S as T,V as k,H as C,N as de,G as M,X as O,L as G,P as E,a4 as K,Q as B,I as z,$ as ve,R as ce}from"./wzry-wzry_vue-BEC82j21.js";import{i as _e,d as ge,_ as ee,u as me,A as te,a as N,v as W,b as D,M as I,c as Y,e as se,f as fe,$ as R,g as q,h as pe,j as ye,k as j,l as $e,m as ke,n as we,o as xe,C as be,p as F,q as oe,N as he,K as H,r as le,T as Le,B as Ee,s as Ce,t as Te,w as De,x as ze,L as Re,V as ae,y as Z,z as Ie,D as J,E as Se}from"./wzry-index-CTpLHwAa.js";import{g as Ve}from"./wzry-wzry_lodash-BosuxZz1.js";import{d as Q}from"./wzry-wzry_dayjs-RHYc_Oz-.js";import{K as Fe}from"./wzry-index-gLw2VSKK.js";import"./wzry-wzry_axios-ChA_wbf5.js";import"./wzry-wzry_pinyin_pro-BOs0bO5i.js";import"./wzry-wzry_vuePlugin-DfAOYnI4.js";import"./wzry-wzry_i18n-D3aQbx8W.js";import"./wzry-wzry_vueuse-Dl7OonR3.js";var Ae=ge,Be=_e,Me="Expected a function";function Ne(b,_,i){var r=!0,a=!0;if(typeof b!="function")throw new TypeError(Me);return Be(i)&&(r="leading"in i?!!i.leading:r,a="trailing"in i?!!i.trailing:a),Ae(b,_,{leading:r,maxWait:_,trailing:a})}var je=Ne;const Oe=Ve(je),Ue=b=>{const{browser_name:_}=me();if(ee||_==="safari")return;const r=Oe(v=>{const{innerWidth:c,innerHeight:n}=window,p=Number(((v.pageX-c/2)/(c/2)).toFixed(2)),f=Number(((v.pageY-n/2)/(n/2)).toFixed(2));b(p,f)},50),a=v=>r(v);window.addEventListener("mousemove",a),window.addEventListener("touchmove",a),ue(()=>{window.removeEventListener("mousemove",a),window.removeEventListener("touchmove",a)})},Pe={mounted(b,_){b.addEventListener("dragover",i=>{var r,a;i.preventDefault(),(a=(r=_.value).enter)==null||a.call(r)}),b.addEventListener("dragleave",()=>{var i,r;(r=(i=_.value).leave)==null||r.call(i)}),b.addEventListener("drop",i=>{var a;i.preventDefault();const r=(a=i.dataTransfer)==null?void 0:a.items[0].getAsFile();_.value.getFile(r)})}},Ge={class:"logo-box"},Ke=["src"],qe=["data-text"],He={for:"file",class:"label"},Xe={class:"text"},We={key:0,class:"tip"},Ye=["src"],Ze={class:"username"},Je={key:1,class:"text"},Qe={class:"demo"},et=["src"],tt=V({__name:"index",setup(b){const{playAudio:_}=se(),i=$(),r=te(),a=$(!0),v=$(!1),c=$(!1),n=$();Ue((u,d)=>{i.value&&(i.value.style.transform=`translate(-50%, -50%) rotateX(${d*10}deg) rotateY(${-u*10}deg)`)});const p=S(()=>a.value?v.value?"松开解析卡片":"请放置召唤师卡":"欢迎登录"),f=()=>{v.value=!0},s=()=>{v.value=!1},L=u=>{y(u),s()},y=u=>{let d,h;if(u instanceof Event?(h=u.target,d=h.files[0]):d=u,d.name.endsWith(".wzry")){const A=new FileReader;A.onload=U=>{const ne=U.target.result.toString();try{if(n.value=fe(ne),n.value.isDev){R(q("mg14",{v:"开发"}),"error");return}const P=()=>{pe({title:"读取召唤师卡",placeholder:"请输入密码",confirm(ie,re){var X;ie===n.value.password?(a.value=!1,re(),R(`${ye}，${(X=n.value)==null?void 0:X.username}`)):(R(j.rh43,"error"),P())}})};P()}catch{R(j.by88,"error")}h&&(h.value="")},A.readAsText(d)}else R(j.ai11,"error")},m=async()=>{const u=ke();u.avatar=await $e(N("head")),u.username="召唤师",u.password="123456",u.id=we.encode(Q().valueOf().toString()),u.createTime=Q().valueOf(),u.isDev=!1,R(j.fh97),r.login(u),_("e84n")},w=()=>{xe({text:be.wi59,confirm(){a.value=!0,n.value=void 0}})},g=()=>{n.value&&(r.login(n.value),_("e84n"))};return(u,d)=>{var h,A;return x((e(),o("div",{ref_key:"RegLoginRef",ref:i,class:"reg-login"},[x((e(),o("div",Ge,[t("img",{class:"logo",src:l(N)("login_logo"),alt:"logo"},null,8,Ke)])),[[l(W),{down:!0,colors:["#EFD68F","#E0B34E"]}]]),t("div",{class:"title","data-text":p.value},k(p.value),9,qe),a.value?(e(),o(C,{key:0},[x(t("input",{id:"file",type:"file",onChange:y},null,544),[[de,!1]]),x((e(),o("label",He,[d[3]||(d[3]=t("i",{class:"iconfont wzry-chaka"},null,-1)),t("div",Xe,[d[2]||(d[2]=t("div",{class:"select"},"点击选择卡片文件",-1)),l(ee)?T("",!0):(e(),o("div",We,"支持拖拽文件到此处"))])])),[[l(D),{text:l(I).g9x6}]])],64)):(e(),o("div",{key:1,class:M(["card-info",{del:c.value}]),onClick:w,onMouseenter:d[0]||(d[0]=U=>c.value=!0),onMouseleave:d[1]||(d[1]=U=>c.value=!1)},[c.value?x((e(),o("div",Je,d[4]||(d[4]=[O("换卡")]))),[[l(D)]]):(e(),o(C,{key:0},[t("img",{src:(h=n.value)==null?void 0:h.avatar,alt:"",class:"avatar"},null,8,Ye),t("div",Ze,k((A=n.value)==null?void 0:A.username),1)],64))],34)),x((e(),o("div",Qe,d[5]||(d[5]=[O(" 没有卡片？点击此处生成 ")]))),[[l(Y),m],[l(D),{text:l(I).xj79}]]),a.value?T("",!0):x((e(),o("div",{key:2,class:"into-btn",style:G({backgroundImage:`url(${l(N)("login_btn")})`})},[d[6]||(d[6]=t("span",{class:"text"},"登录",-1)),d[7]||(d[7]=t("span",{class:"desc"},"LOGIN",-1)),t("img",{class:"bg",src:l(N)("login_btn"),alt:""},null,8,et)],4)),[[l(W),{colors:["#986B33","#CEA64E"]}],[l(Y),g]])])),[[l(Pe),{getFile:L,enter:f,leave:s}]])}}}),st=F(tt,[["__scopeId","data-v-d29c3919"]]),ot=["innerHTML"],lt=V({__name:"index",setup(b){const _=$(""),i=$(!0);return oe({promiseFn:he}).then(r=>{_.value=r.data}).catch(()=>{R(q("rc53",{v:"系统公告"}),"error")}).finally(()=>{i.value=!1}),(r,a)=>(e(),E(l(H),K({loading:i.value},r.$attrs,{width:"56.25rem",header:"系统公告",onClose:a[0]||(a[0]=v=>i.value=!0)}),{default:B(()=>[x(t("div",{class:"notice",innerHTML:_.value},null,8,ot),[[l(le)]])]),_:1},16,["loading"]))}}),at=F(lt,[["__scopeId","data-v-535f6ff3"]]),nt=["src","onClick"],it=V({__name:"index",setup(b){const _=$(),i=$(!0),r=$([]);oe({promiseFn:Le}).then(v=>{i.value=!1,r.value=v.data.map(c=>c.map(n=>Ee.IMGBED+n))}).catch(()=>{R(q("rc53",{v:"系统公告"}),"error")}).finally(()=>{i.value=!1});const a=(v,c)=>{Te({parent:v.target,type:"DEFAULT",bigImage:c[0],blurImage:c[1]})};return(v,c)=>(e(),E(l(H),K({loading:i.value},v.$attrs,{width:"56.25rem",header:"本站开发者战绩"}),{default:B(()=>[t("div",{ref_key:"teamRef",ref:_,class:"team"},[(e(!0),o(C,null,z(r.value,(n,p)=>x((e(),o("img",{key:p,src:n[1],alt:"",onClick:f=>a(f,n)},null,8,nt)),[[l(Ce),{img:n[0]}],[l(D),{text:l(I).zq77}]])),128))],512)]),_:1},16,["loading"]))}}),rt=F(it,[["__scopeId","data-v-8885297b"]]),ut={class:"tool"},dt={class:"tool"},vt={class:"tool"},ct={class:"tool"},_t={class:"tool"},gt=V({__name:"index",emits:["clicks"],setup(b,{expose:_,emit:i}){const r=i,{playAudio:a}=se(),v=$(),c=$(!1),n=S(()=>c.value?"wzry-jingyin-mianxing":"wzry-laba-mianxing"),p=f=>{f==="sound"&&(a("n4r4"),c.value=!c.value),f==="readme"&&a("n4r4"),r("clicks",f)};return _({_el:v}),(f,s)=>(e(),o("div",{ref_key:"toolbarRef",ref:v,class:"tool-bar"},[t("div",ut,[s[6]||(s[6]=t("div",{class:"line"},null,-1)),x((e(),o("div",{class:M(["box muted",{active:c.value}]),style:G({opacity:c.value?.75:1}),onClick:s[0]||(s[0]=L=>p("sound"))},[t("i",{class:M(["iconfont",n.value])},null,2),s[5]||(s[5]=t("span",{class:"text"},"静音",-1))],6)),[[l(D),{text:l(I).ak79}]]),s[7]||(s[7]=t("div",{class:"base"},null,-1))]),t("div",dt,[s[9]||(s[9]=t("div",{class:"line"},null,-1)),x((e(),o("div",{class:"box elastic",onClick:s[1]||(s[1]=L=>p("readme"))},s[8]||(s[8]=[t("i",{class:"iconfont wzry-readme"},null,-1),t("span",{class:"text"},"介绍",-1)]))),[[l(D),{text:l(I).b6v2}]]),s[10]||(s[10]=t("div",{class:"base"},null,-1))]),t("div",vt,[s[12]||(s[12]=t("div",{class:"line"},null,-1)),x((e(),o("div",{class:"box elastic",onClick:s[2]||(s[2]=L=>p("notice"))},s[11]||(s[11]=[t("i",{class:"iconfont wzry-gonggao"},null,-1),t("span",{class:"text"},"公告",-1)]))),[[l(D),{text:l(I).br37}]]),s[13]||(s[13]=t("div",{class:"base"},null,-1))]),t("div",ct,[s[15]||(s[15]=t("div",{class:"line"},null,-1)),x((e(),o("div",{class:"box elastic",onClick:s[3]||(s[3]=L=>p("update"))},s[14]||(s[14]=[t("i",{class:"iconfont wzry-updateLog"},null,-1),t("span",{class:"text"},"更新",-1)]))),[[l(D),{text:l(I).fr70}]]),s[16]||(s[16]=t("div",{class:"base"},null,-1))]),t("div",_t,[s[18]||(s[18]=t("div",{class:"line"},null,-1)),x((e(),o("div",{class:"box elastic",onClick:s[4]||(s[4]=L=>p("team"))},s[17]||(s[17]=[t("i",{class:"iconfont wzry-youxi"},null,-1),t("span",{class:"text"},"战绩",-1)]))),[[l(D),{text:l(I).c1g6}]]),s[19]||(s[19]=t("div",{class:"base"},null,-1))])],512))}}),mt=F(gt,[["__scopeId","data-v-7bf7407c"]]),ft={class:"down-load"},pt={class:"download-list"},yt={class:"down-load__bar"},$t={class:"down-load__desc"},kt={class:"text"},wt={class:"num"},xt=V({__name:"index",props:{finish:{type:Boolean,required:!0},finishModifiers:{}},emits:["update:finish"],setup(b){const _=ve(b,"finish"),i=te(),{zip_key_name:r,zip_name:a,downloaded_index:v,zip_size:c,zip_downloaded_size:n,zip_download_progress:p,zip_download_finish:f,zip_decompression_progress:s,zip_decompression_finish:L,getZipList:y}=De(),m=S(()=>g=>{let u="",d="",h="";if(!f.value){if(u=p.value,d=`正在下载${a.value}`,h=`${n.value}/${c.value}`,g==="进度条")return u;if(g==="下载内容")return d;if(g==="进度信息")return h}if(!L.value){if(u=s.value,d=`正在解压${a.value}`,h=s.value,g==="进度条")return u;if(g==="下载内容")return d;if(g==="进度信息")return h}if(g==="下载内容")return"加载完毕，祝你体验愉快。"});return(async()=>{await y(),await ze(1e3),_.value=!0,!!localStorage.getItem(Re.USER_DATA)&&i.autoLogin()})(),(g,u)=>(e(),o("div",ft,[t("div",pt,[u[0]||(u[0]=t("div",{class:"title"},"下载列表",-1)),(e(!0),o(C,null,z(Object.values(l(r)),(d,h)=>(e(),o("div",{key:h,class:M(["download-item",{downloaded:l(v)>h,downloading:l(a)===d}])},k(h+1)+"、"+k(d),3))),128))]),t("div",yt,[t("div",{class:"progress",style:G({width:m.value("进度条")})},null,4)]),t("div",$t,[t("div",kt,k(m.value("下载内容")),1),t("div",wt,k(m.value("进度信息")),1)])]))}}),bt=F(xt,[["__scopeId","data-v-069fa1d4"]]),ht={class:"update-log"},Lt={class:"main"},Et={key:0,class:"log-list"},Ct={class:"time"},Tt={key:1,class:"empty"},Dt={key:2,class:"log-list"},zt={class:"time"},Rt={key:3,class:"empty"},It={key:4,class:"log-list"},St={class:"time"},Vt={key:5,class:"empty"},Ft={key:6,class:"log-list"},At={class:"time"},Bt={key:7,class:"empty"},Mt=V({__name:"index",emits:["close"],setup(b,{emit:_}){const i=_,r=ae(),a=$(),v=S(()=>r.data_status),c=S(()=>r.dist_status),n=S(()=>r.update_log),p=()=>{r.updateAll(!0)},f=()=>{var L;r.updateAll(),(L=a.value)==null||L._close()},s=()=>{r.setShowLog(!1),i("close")};return(L,y)=>(e(),E(H,K({ref_key:"kDialogRef",ref:a,"show-close":!v.value&&!c.value},L.$attrs,{width:"57.5rem",header:"更新日志",desc:n.value.time,onClose:s}),{default:B(()=>[t("div",ht,[x((e(),o("div",Lt,[y[0]||(y[0]=t("h1",null,"一、新增特性",-1)),n.value.updateLog.new.length?(e(),o("div",Et,[(e(!0),o(C,null,z(n.value.updateLog.new,(m,w)=>(e(),o("div",{key:w,class:"log-item"},[t("div",Ct,"·"+k(m.time),1),(e(!0),o(C,null,z(m.log,(g,u)=>(e(),o("p",{key:u,class:"text"},k(u+1)+"、"+k(g),1))),128))]))),128))])):(e(),o("p",Tt,"暂无")),y[1]||(y[1]=t("h1",null,"二、功能优化",-1)),n.value.updateLog.function.length?(e(),o("div",Dt,[(e(!0),o(C,null,z(n.value.updateLog.function,(m,w)=>(e(),o("div",{key:w,class:"log-item"},[t("div",zt,"·"+k(m.time),1),(e(!0),o(C,null,z(m.log,(g,u)=>(e(),o("p",{key:u,class:"text"},k(u+1)+"、"+k(g),1))),128))]))),128))])):(e(),o("p",Rt,"暂无")),y[2]||(y[2]=t("h1",null,"三、样式优化",-1)),n.value.updateLog.style.length?(e(),o("div",It,[(e(!0),o(C,null,z(n.value.updateLog.style,(m,w)=>(e(),o("div",{key:w,class:"log-item"},[t("div",St,"·"+k(m.time),1),(e(!0),o(C,null,z(m.log,(g,u)=>(e(),o("p",{key:u,class:"text"},k(u+1)+"、"+k(g),1))),128))]))),128))])):(e(),o("p",Vt,"暂无")),y[3]||(y[3]=t("h1",null,"四、BUG修复",-1)),n.value.updateLog.bug.length?(e(),o("div",Ft,[(e(!0),o(C,null,z(n.value.updateLog.bug,(m,w)=>(e(),o("div",{key:w,class:"log-item"},[t("div",At,"·"+k(m.time),1),(e(!0),o(C,null,z(m.log,(g,u)=>(e(),o("p",{key:u,class:"text"},k(u+1)+"、"+k(g),1))),128))]))),128))])):(e(),o("p",Bt,"暂无"))])),[[l(le)]]),c.value?x((e(),E(Z,{key:0,type:"warning",onClick:p},{default:B(()=>y[4]||(y[4]=[O(" 更新并重启 ")])),_:1,__:[4]})),[[l(D)]]):v.value?x((e(),E(Z,{key:1,onClick:f},{default:B(()=>y[5]||(y[5]=[O("确定")])),_:1,__:[5]})),[[l(D)]]):T("",!0)])]),_:1},16,["show-close","desc"]))}}),Nt=F(Mt,[["__scopeId","data-v-bb4769cf"]]),jt={class:"login"},Ot={class:"login__logo"},Ut=["src"],Pt=["src"],Gt=V({__name:"index",setup(b){const _=ae(),{video_login_version:i,load:r}=Ie(),a=$(!1),v=$(!1),c=$(!1),n=$(!1),p=$(!1),f=$(!1),s=S(()=>!f.value||v.value||n.value);_.getVersion().then(()=>{p.value=!0}).catch(r);const L=()=>{p.value=!0,c.value=!1},y=m=>{m==="readme"&&open("https://juejin.cn/post/7373937820177940518"),m==="sound"&&(a.value=!a.value),v.value=m==="notice",n.value=m==="team",c.value=m==="update"};return setTimeout(()=>{v.value=!0},1e3),(m,w)=>(e(),o("div",jt,[t("div",Ot,[t("img",{src:l(J)("logo"),alt:""},null,8,Ut)]),f.value?(e(),E(st,{key:0,class:M({"hide-reg-login":s.value})},null,8,["class"])):T("",!0),f.value?(e(),E(mt,{key:1,onClicks:y})):T("",!0),v.value&&f.value?(e(),E(at,{key:2,modelValue:v.value,"onUpdate:modelValue":w[0]||(w[0]=g=>v.value=g)},null,8,["modelValue"])):T("",!0),n.value?(e(),E(rt,{key:3,modelValue:n.value,"onUpdate:modelValue":w[1]||(w[1]=g=>n.value=g)},null,8,["modelValue"])):T("",!0),!f.value&&p.value?(e(),E(bt,{key:4,finish:f.value,"onUpdate:finish":w[2]||(w[2]=g=>f.value=g)},null,8,["finish"])):T("",!0),(e(),E(ce,{to:"body"},[l(_).show_update||c.value?(e(),E(Nt,{key:0,onClose:L})):T("",!0)])),l(i)?(e(),o("img",{key:5,class:"bg",src:l(J)("login_bg",l(i),"jpg"),alt:""},null,8,Pt)):T("",!0),f.value&&l(i)?(e(),E(l(Fe),{key:6,class:"video",link:l(Se)("login_bg",l(i)),muted:a.value},null,8,["link","muted"])):T("",!0)]))}}),ts=F(Gt,[["__scopeId","data-v-1d9ae461"]]);export{ts as default};
