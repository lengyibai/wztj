import{l as D,r as h,v as de,j as V,M as x,u as s,C as n,D as _,H as e,S as A,F as G,N as ue,T as b,G as M,X as H,L as P,I as Q,J as ee,P as k,Q as se,a4 as te,E as _e,$ as ve}from"./wzry-wzry_vue-ZP7q88Pe.js";import{g as fe}from"./wzry-wzry_lodash-4gQjN7DL.js";import{d as me,i as ge,A as ae,_ as X,u as pe,a as he,b as $e,$ as U,c as E,e as ye,M as R,f as xe,g as we,h as F,j as be,k as ke,l as oe,m as Ee,C as Te,v as W,n as T,o as I,p as Y,q as C,r as ne,N as Le,s as Ie,K as le,B as De,T as Ce,t as ze,w as Se,x as Re,y as Fe,z as Ae,L as Me,D as Ve,E as Z,F as Be,G as Ne}from"./wzry-index-O-tmU9-f.js";import{d as J}from"./wzry-wzry_dayjs-p57Mk9r_.js";import{K as Oe}from"./wzry-index-NWBRcILs.js";import"./wzry-wzry_axios-wVsZAsRs.js";import"./wzry-wzry_vuePlugin-8reJzXjy.js";import"./wzry-wzry_i18n-x0daaVag.js";const je={mounted(d,c){d.addEventListener("dragover",a=>{var t,o;a.preventDefault(),(o=(t=c.value).enter)==null||o.call(t)}),d.addEventListener("dragleave",()=>{var a,t;(t=(a=c.value).leave)==null||t.call(a)}),d.addEventListener("drop",a=>{var o;a.preventDefault();const t=(o=a.dataTransfer)==null?void 0:o.items[0].getAsFile();c.value.getFile(t)})}};var Ge=me,Pe=ge,Ue="Expected a function";function Ke(d,c,a){var t=!0,o=!0;if(typeof d!="function")throw new TypeError(Ue);return Pe(a)&&(t="leading"in a?!!a.leading:t,o="trailing"in a?!!a.trailing:o),Ge(d,c,{leading:t,maxWait:c,trailing:o})}var qe=Ke;const He=fe(qe),B=d=>(Q("data-v-97351333"),d=d(),ee(),d),Xe={class:"logo-box"},We=["src"],Ye=["data-text"],Ze={for:"file",class:"label"},Je=B(()=>e("i",{class:"iconfont wzry-chaka"},null,-1)),Qe={class:"text"},es=B(()=>e("div",{class:"select"},"点击选择卡片文件",-1)),ss={key:0,class:"tip"},ts=["src"],as={class:"username"},os={key:1,class:"text"},ns={class:"demo"},ls=B(()=>e("span",{class:"text"},"登录",-1)),is=B(()=>e("span",{class:"desc"},"LOGIN",-1)),rs=["src"],cs=D({__name:"index",setup(d){const{browser_name:c}=pe(),{playAudio:a}=oe(),t=h(),o=ae(),l=h(!0),u=h(!1),p=h(!1),i=h();if(!X||c==="safari"){const r=new he((g,L)=>{t.value&&(t.value.style.transform=`translate(-50%, -50%) rotateX(${L*10}deg) rotateY(${-g*10}deg)`)}),v=He(g=>{r.move(g)},50);window.addEventListener("mousemove",v),de(()=>{window.removeEventListener("mousemove",v)})}const f=V(()=>l.value?u.value?"松开解析卡片":"请放置召唤师卡":"欢迎登录"),m=()=>{u.value=!0},w=()=>{u.value=!1},N=r=>{S(r),w()},S=r=>{let v,g;if(r instanceof Event?(g=r.target,v=g.files[0]):v=r,v.name.endsWith(".wzry")){const L=new FileReader;L.onload=O=>{const ie=O.target.result.toString();try{if(i.value=$e(ie),i.value.isDev){E(U("mg14",{v:"开发"}),"error");return}const j=()=>{xe({title:"读取召唤师卡",placeholder:"请输入密码",confirm(re,ce){var q;re===i.value.password?(l.value=!1,ce(),E(`${ye}，${(q=i.value)==null?void 0:q.username}`)):(E(R.rh43,"error"),j())}})};j()}catch{E(R.by88,"error")}g&&(g.value="")},L.readAsText(v)}},z=async()=>{const r=Ee();r.avatar=await we(F("head")),r.username="召唤师",r.password="123456",r.id=be.encode(J().valueOf().toString()),r.createTime=J().valueOf(),r.isDev=!1,E(R.fh97),o.login(r),a("e84n")},K=()=>{ke({text:Te.wi59,confirm(){l.value=!0,i.value=void 0}})},y=()=>{if(i.value){if(i.value.isInvalid){E(R.uf04,"error");return}o.login(i.value),a("e84n")}};return(r,v)=>{var g,L;return x((n(),_("div",{ref_key:"RegLoginRef",ref:t,class:"reg-login"},[x((n(),_("div",Xe,[e("img",{class:"logo",src:s(F)("login_logo"),alt:"logo"},null,8,We)])),[[s(W),{down:!0,colors:["#EFD68F","#E0B34E"]}]]),e("div",{class:"title","data-text":f.value},A(f.value),9,Ye),l.value?(n(),_(G,{key:0},[x(e("input",{id:"file",type:"file",onChange:S},null,544),[[ue,!1]]),x((n(),_("label",Ze,[Je,e("div",Qe,[es,s(X)?b("",!0):(n(),_("div",ss,"支持拖拽文件到此处"))])])),[[s(T),{text:s(I).g9x6}]])],64)):(n(),_("div",{key:1,class:M(["card-info",{del:p.value}]),onClick:K,onMouseenter:v[0]||(v[0]=O=>p.value=!0),onMouseleave:v[1]||(v[1]=O=>p.value=!1)},[p.value?x((n(),_("div",os,[H("换卡")])),[[s(T)]]):(n(),_(G,{key:0},[e("img",{src:(g=i.value)==null?void 0:g.avatar,alt:"",class:"avatar"},null,8,ts),e("div",as,A((L=i.value)==null?void 0:L.username),1)],64))],34)),x((n(),_("div",ns,[H(" 没有卡片？点击此处生成 ")])),[[s(Y),z],[s(T),{text:s(I).xj79}]]),l.value?b("",!0):x((n(),_("div",{key:2,class:"into-btn",style:P({backgroundImage:`url(${s(F)("login_btn")})`})},[ls,is,e("img",{class:"bg",src:s(F)("login_btn"),alt:""},null,8,rs)],4)),[[s(W),{colors:["#986B33","#CEA64E"]}],[s(Y),y]])])),[[s(je),{getFile:N,enter:m,leave:w}]])}}}),ds=C(cs,[["__scopeId","data-v-97351333"]]),us=["innerHTML"],_s=D({__name:"index",setup(d){const c=h(""),a=h(!0);return ne({promiseFn:Le}).then(t=>{c.value=t.data}).catch(()=>{E(U("rc53",{v:"系统公告"}),"error")}).finally(()=>{a.value=!1}),(t,o)=>(n(),k(s(le),te({loading:a.value},t.$attrs,{width:"56.25rem",header:"系统公告",onClose:o[0]||(o[0]=l=>a.value=!0)}),{default:se(()=>[x(e("div",{class:"notice",innerHTML:c.value},null,8,us),[[s(Ie)]])]),_:1},16,["loading"]))}}),vs=C(_s,[["__scopeId","data-v-1ba77582"]]),fs=["src","onClick"],ms=D({__name:"index",setup(d){const c=h(),a=h(!0),t=h([]);ne({promiseFn:Ce}).then(l=>{a.value=!1,t.value=l.data.map(u=>u.map(p=>De.IMGBED+p))}).catch(()=>{E(U("rc53",{v:"系统公告"}),"error")}).finally(()=>{a.value=!1});const o=(l,u)=>{Se({parent:l.target,type:"DEFAULT",bigImage:u[0],blurImage:u[1]})};return(l,u)=>(n(),k(s(le),te({loading:a.value},l.$attrs,{width:"56.25rem",header:"本站开发者战绩"}),{default:se(()=>[e("div",{ref_key:"teamRef",ref:c,class:"team"},[(n(!0),_(G,null,_e(t.value,(p,i)=>x((n(),_("img",{key:i,src:p[1],alt:"",onClick:f=>o(f,p)},null,8,fs)),[[s(ze),{img:p[0]}],[s(T),{text:s(I).zq77}]])),128))],512)]),_:1},16,["loading"]))}}),gs=C(ms,[["__scopeId","data-v-b3c6fdf8"]]),$=d=>(Q("data-v-d757f6d1"),d=d(),ee(),d),ps={class:"tool"},hs=$(()=>e("div",{class:"line"},null,-1)),$s=$(()=>e("span",{class:"text"},"静音",-1)),ys=$(()=>e("div",{class:"base"},null,-1)),xs={class:"tool"},ws=$(()=>e("div",{class:"line"},null,-1)),bs=$(()=>e("i",{class:"iconfont wzry-readme"},null,-1)),ks=$(()=>e("span",{class:"text"},"介绍",-1)),Es=[bs,ks],Ts=$(()=>e("div",{class:"base"},null,-1)),Ls={class:"tool"},Is=$(()=>e("div",{class:"line"},null,-1)),Ds=$(()=>e("i",{class:"iconfont wzry-gonggao"},null,-1)),Cs=$(()=>e("span",{class:"text"},"公告",-1)),zs=[Ds,Cs],Ss=$(()=>e("div",{class:"base"},null,-1)),Rs={class:"tool"},Fs=$(()=>e("div",{class:"line"},null,-1)),As=$(()=>e("i",{class:"iconfont wzry-youxi"},null,-1)),Ms=$(()=>e("span",{class:"text"},"战绩",-1)),Vs=[As,Ms],Bs=$(()=>e("div",{class:"base"},null,-1)),Ns=D({__name:"index",emits:["clicks"],setup(d,{expose:c,emit:a}){const t=a,{playAudio:o}=oe(),l=h(),u=h(!1),p=V(()=>u.value?"wzry-jingyin-mianxing":"wzry-laba-mianxing"),i=f=>{f==="sound"&&(o("n4r4"),u.value=!u.value),f==="readme"&&o("n4r4"),t("clicks",f)};return c({_el:l}),(f,m)=>(n(),_("div",{ref_key:"toolbarRef",ref:l,class:"tool-bar"},[e("div",ps,[hs,x((n(),_("div",{class:M(["box muted",{active:u.value}]),style:P({opacity:u.value?.75:1}),onClick:m[0]||(m[0]=w=>i("sound"))},[e("i",{class:M(["iconfont",p.value])},null,2),$s],6)),[[s(T),{text:s(I).ak79}]]),ys]),e("div",xs,[ws,x((n(),_("div",{class:"box elastic",onClick:m[1]||(m[1]=w=>i("readme"))},Es)),[[s(T),{text:s(I).b6v2}]]),Ts]),e("div",Ls,[Is,x((n(),_("div",{class:"box elastic",onClick:m[2]||(m[2]=w=>i("notice"))},zs)),[[s(T),{text:s(I).br37}]]),Ss]),e("div",Rs,[Fs,x((n(),_("div",{class:"box elastic",onClick:m[3]||(m[3]=w=>i("team"))},Vs)),[[s(T),{text:s(I).c1g6}]]),Bs])],512))}}),Os=C(Ns,[["__scopeId","data-v-d757f6d1"]]),js={class:"down-load"},Gs={class:"down-load__bar"},Ps={class:"down-load__desc"},Us={class:"text"},Ks={class:"num"},qs=D({__name:"index",props:{finish:{type:Boolean,required:!0},finishModifiers:{}},emits:["update:finish"],setup(d){const c=ve(d,"finish"),a=ae(),{type:t,getData:o,progress:l}=Re(),{zip_name:u,zip_size:p,zip_downloaded_size:i,zip_download_progress:f,zip_download_finish:m,zip_decompression_progress:w,zip_decompression_finish:N,getZipList:S}=Fe(),z=V(()=>y=>{let r="",v="",g="";if(!m.value){if(r=f.value,v=`正在下载${u.value}`,g=`${i.value}/${p.value}`,y==="进度条")return r;if(y==="下载内容")return v;if(y==="进度信息")return g}if(!N.value){if(r=w.value,v=`正在解压${u.value}`,g=w.value,y==="进度条")return r;if(y==="下载内容")return v;if(y==="进度信息")return g}if(r=l.value,v=t.value,g=l.value,y==="进度条")return r;if(y==="下载内容")return v;if(y==="进度信息")return g});return(async()=>{await S(),await o(),await Ae(1e3),c.value=!0,!!localStorage.getItem(Me.USER_DATA)&&a.autoLogin()})(),(y,r)=>(n(),_("div",js,[e("div",Gs,[e("div",{class:"progress",style:P({width:z.value("进度条")})},null,4)]),e("div",Ps,[e("div",Us,A(z.value("下载内容")),1),e("div",Ks,A(z.value("进度信息")),1)])]))}}),Hs=C(qs,[["__scopeId","data-v-578b02a9"]]),Xs={class:"login"},Ws={class:"login__logo"},Ys=["src"],Zs=["src"],Js=D({__name:"index",setup(d){const{video_home_version:c}=Ve(),a=h(!1),t=h(!1),o=h(!1),l=h(!1),u=V(()=>!l.value||t.value||o.value),p=i=>{i==="readme"&&open(Ne("readme")),i==="sound"&&(a.value=!a.value),t.value=i==="notice",o.value=i==="team"};return setTimeout(()=>{t.value=!0},1e3),(i,f)=>(n(),_("div",Xs,[e("div",Ws,[e("img",{src:s(Z)("logo"),alt:""},null,8,Ys)]),l.value?(n(),k(ds,{key:0,class:M({"hide-reg-login":u.value})},null,8,["class"])):b("",!0),l.value?(n(),k(Os,{key:1,onClicks:p})):b("",!0),t.value&&l.value?(n(),k(vs,{key:2,modelValue:t.value,"onUpdate:modelValue":f[0]||(f[0]=m=>t.value=m)},null,8,["modelValue"])):b("",!0),o.value?(n(),k(gs,{key:3,modelValue:o.value,"onUpdate:modelValue":f[1]||(f[1]=m=>o.value=m)},null,8,["modelValue"])):b("",!0),l.value?b("",!0):(n(),k(Hs,{key:4,finish:l.value,"onUpdate:finish":f[2]||(f[2]=m=>l.value=m)},null,8,["finish"])),s(c)?(n(),_("img",{key:5,class:"bg",src:s(Z)("login_bg",s(c),"jpg"),alt:""},null,8,Zs)):b("",!0),l.value&&s(c)?(n(),k(s(Oe),{key:6,link:s(Be)("login_bg",s(c)),muted:a.value},null,8,["link","muted"])):b("",!0)]))}}),it=C(Js,[["__scopeId","data-v-6feea761"]]);export{it as default};
