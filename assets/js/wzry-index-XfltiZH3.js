import{l as R,M as b,u as e,C as r,D as h,H as _,T as x,P as E,Q as S,X as D,r as v,O as a,y as z,x as q,U as M,W as Q,F as W,L as Y,E as X}from"./wzry-wzry_vue-ZP7q88Pe.js";import{s as F,u as j}from"./wzry-wzry_vuePlugin-8reJzXjy.js";import{aM as J,t as Z,H as ee,n as G,q as w,bw as H,ay as A,aP as te,o as se,aQ as ae,U as ne,z as oe,ag as re,l as ie,k as B,am as P,ac as K,an as le}from"./wzry-index-O-tmU9-f.js";import{F as ce,K as de}from"./wzry-index-JMl6VVSm.js";import{F as ue}from"./wzry-index-jh5mX5FK.js";import{L as me}from"./wzry-index-2j2SS27Y.js";/* empty css                                                                   */import"./wzry-wzry_axios-wVsZAsRs.js";import"./wzry-wzry_dayjs-p57Mk9r_.js";import"./wzry-wzry_lodash-4gQjN7DL.js";import"./wzry-wzry_i18n-x0daaVag.js";const pe={class:"skin-card"},_e=["src"],fe=["src"],ke={class:"bottom"},ve=["innerHTML"],he=["innerHTML"],ge={class:"tool"},Se=R({__name:"index",props:{data:{}},emits:["exchange"],setup(I,{emit:g}){const m=g,n=(s,i)=>{m("exchange",s,i)};return(s,i)=>b((r(),h("div",pe,[b(_("img",{class:"bg",src:s.data.posterBlur},null,8,_e),[[e(Z),{img:s.data.cover}]]),s.data.link?(r(),h("img",{key:0,class:"type",src:s.data.link},null,8,fe)):x("",!0),_("div",ke,[_("div",{class:"name",innerHTML:s.data.name},null,8,ve),_("div",{class:"mark",innerHTML:`——${s.data.heroName}`},null,8,he)]),_("div",ge,[b((r(),E(e(ee),{type:"warning",class:"k-button",onClick:i[0]||(i[0]=l=>n(l,s.data))},{default:S(()=>[D(" 点击兑换 ")]),_:1})),[[e(G)]])])])),[[e(J)]])}}),ye=w(Se,[["__scopeId","data-v-15149dff"]]),Te={class:"skin-toolbar"},be={class:"filter-select"},Ce=R({__name:"index",emits:["change"],setup(I,{expose:g,emit:m}){const n=m,s=H(),{skin_type:i,skin_type_list:l}=F(s),{filterSkinType:C,filterGender:$,searchSkin:L}=s,c=v(""),p=()=>{c.value="",n("change")},f=d=>{C(l.value[d]),p()},y=d=>{$(d),p()},T=A(()=>{L(c.value),n("change")},500);return g({_clearName:p}),(d,k)=>(r(),h("div",Te,[_("div",be,[a(te,{options:e(l),"sort-text":e(i),"list-height":"26.5625rem","min-width":"8.5rem",onSelect:f},null,8,["options","sort-text"])]),a(ce,{onChange:y}),b(a(e(ae),{modelValue:c.value,"onUpdate:modelValue":k[0]||(k[0]=N=>c.value=N),required:!1,class:"k-input",placeholder:"英雄/皮肤","no-special":!1,onInput:e(T)},null,8,["modelValue","onInput"]),[[e(G),{text:e(se).kb43,type:"INPUT"}]])]))}}),$e=w(Ce,[["__scopeId","data-v-831e3757"]]),Le={class:"skin"},Ne={class:"skin-main"},xe=R({name:"KingCrystal",__name:"index",setup(I){const g=j(),m=ne(),n=H(),{scroll:s,finish:i,show_list:l,loading:C}=F(n),{playAudio:$}=ie(),L=[[2e3,4],[1600,3],[1400,2],[720,1]],c=v(),p=v(),f=v(0),y=v(!1),T=v(!1);n.getSkin();const d=()=>{const t=document.documentElement.clientWidth;t>=2e3&&(f.value=4);for(const[o,u]of L)t<o&&(f.value=u)},k=A(t=>{n.setScroll(t),T.value=t>250},250),N=()=>{var t;k(0),(t=c.value)==null||t._clearName()},U=(t,o)=>{m.articles.SKIN_DEBRIS>=Number(o.debris)?B({text:P("r36m",{name:`${o.heroName}-${o.name}`,prop:K.KING_CRYSTAL,count:1}),confirm(){m.setGamePropNum("KING_CRYSTAL",1,"SUB").then(()=>{var u;m.addSkin(o.id,t),(u=c.value)==null||u._clearName()})}}):B({text:P("p89n",{prop:K.HERO_DEBRIS}),confirm(){g.push(le.PROP_SHOP)}})},V=()=>{var t;(t=p.value)==null||t._setPosition(0,!0)};return z(async()=>{var t;$("h3w0"),d(),(t=p.value)==null||t._setPosition(s.value),window.addEventListener("resize",d),await oe(250),y.value=!0}),q(()=>{window.removeEventListener("resize",d)}),(t,o)=>(r(),h("div",Le,[_("div",Ne,[a(M,{name:"to-bottom",appear:""},{default:S(()=>[a($e,{ref_key:"skinToolbarRef",ref:c,onChange:o[0]||(o[0]=u=>e(k)(0))},null,512)]),_:1}),a(e(de),{active:T.value,onBackTop:V},null,8,["active"]),a(M,{name:"card-list"},{default:S(()=>[e(l).length&&y.value?(r(),E(e(me),{key:0,ref_key:"skinListRef",ref:p,finish:e(i),gap:"1rem",loading:e(C),count:f.value,"scroll-top":e(s),onLoadMore:e(n).loadMore,onScroll:e(k)},{default:S(()=>[a(Q,{name:"skin-card",appear:""},{default:S(()=>[(r(!0),h(W,null,X(e(l),(u,O)=>(r(),h("div",{key:u.id,ref_for:!0,ref:"skinCardRefs",class:"skin-card",style:Y({"transition-delay":O%(f.value*2)*.1+"s"})},[a(ye,{data:u,onExchange:U},null,8,["data"])],4))),128))]),_:1})]),_:1},8,["finish","loading","count","scroll-top","onLoadMore","onScroll"])):x("",!0)]),_:1}),e(l).length===0?(r(),E(e(re),{key:0,tip:"暂无可兑换皮肤"})):x("",!0)]),a(e(ue),{type:"skin",onChange:N})]))}}),Ae=w(xe,[["__scopeId","data-v-c63437b5"]]);export{Ae as default};
