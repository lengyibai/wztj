import{l as M,r as q,C as o,D as i,F as k,E as K,G,S as E,T as J,H as s,u as t,M as I,P as N,Q as d,L as P,I as Q,J as W,y as j,O as r,U as w}from"./wzry-wzry_vue-ZP7q88Pe.js";import{u as X,L as Z,S as tt}from"./wzry-useLotteryPlay-XQ834vog.js";import{s as st}from"./wzry-wzry_vuePlugin-8reJzXjy.js";import{bn as et,I as y,J as u,bo as D,n as S,o as b,H as T,z as at,l as $,q as z}from"./wzry-index-O-tmU9-f.js";import"./wzry-index-IyIFNvic.js";import"./wzry-wzry_axios-wVsZAsRs.js";import"./wzry-wzry_dayjs-p57Mk9r_.js";import"./wzry-wzry_lodash-4gQjN7DL.js";import"./wzry-wzry_i18n-x0daaVag.js";const n=p=>(Q("data-v-58216f69"),p=p(),W(),p),ot={class:"lottery-area"},lt={key:0,class:"tag"},nt=["src"],it={class:"text"},ct={class:"tool"},dt={class:"content"},_t={class:"luck"},rt={class:"luck-value"},ut=["data-text"],pt=n(()=>s("div",{class:"luck-label","data-text":"幸运值"},"幸运值",-1)),vt={class:"btns"},mt=["src"],yt=n(()=>s("span",{class:"num"},"×1",-1)),ht=n(()=>s("div",{class:"text"},"夺宝一次",-1)),ft=["src"],kt=n(()=>s("span",{class:"num"},"×5",-1)),It=n(()=>s("div",{class:"text"},"夺宝五次",-1)),Nt=["src"],St=n(()=>s("span",{class:"num"},"×1",-1)),bt=n(()=>s("div",{class:"text"},"夺宝一次",-1)),Tt=["src"],xt=n(()=>s("span",{class:"num"},"×5",-1)),Ct=n(()=>s("div",{class:"text"},"夺宝五次",-1)),Lt=M({__name:"index",setup(p){const _=et(),{skin_lucky:h}=st(_),{playAudio:x}=$(),{getLotteryIndex:A,gift_index:v,last_reward_position:Y,checkAloneNotCount:B,setLastPosition:V,have_alone_free:f,have_multiple_free:C,have_alone_discount:L,have_multiple_discount:O,calcAloneReward:F,calcMultipleReward:H,checkMultipleNotCount:U}=X("SKIN"),l=q(-1),g=()=>{if(B())return;A();let c=0,a=0;const e=()=>{setTimeout(()=>{if(x("o7r6"),l.value++,l.value===12&&(l.value=0),l.value===Y.value&&c++,c===2&&(a+=35),c===2&&v.value===l.value){setTimeout(()=>{V(v.value),_.setLuckValue("SKIN"),F()},250);return}e()},50+[0,25,50,75][c]+a)};e()},R=c=>{if(U(c,g))return;const a=[],e=()=>{setTimeout(async()=>{if(l.value++,x("o7r6"),l.value===12&&(l.value=0),v.value===l.value&&a.length<5&&(_.setLuckValue("SKIN"),D.SKIN[v.value].type==="HONOR_CRYSTAL"&&_.resetSkinLuck(),a.push(v.value),await at(500,A),a.length>=5)){H(a);return}e()},50)};e()};return(c,a)=>(o(),i("div",ot,[(o(!0),i(k,null,K(t(D).SKIN,(e,m)=>(o(),i("div",{key:m,class:G([{active:l.value===m},"area-box"])},[e.num?(o(),i("div",lt,E(e.num),1)):J("",!0),s("img",{src:t(y)(t(u).ICON[e.type]),alt:"",class:"icon"},null,8,nt),s("div",it,E(t(u).NAME[e.type]),1)],2))),128)),s("div",ct,[s("div",dt,[s("div",_t,[s("div",rt,[s("div",{class:"value","data-text":t(h)},E(t(h)),9,ut)]),pt]),s("div",vt,[t(f)?(o(),i(k,{key:0},[I((o(),N(t(T),{disabled:!t(f),class:"k-button",type:"warning",onClick:g},{default:d(()=>[s("img",{src:t(y)(t(u).ICON.SKIN_LOTTERY_COIN),alt:"",class:"icon"},null,8,mt),yt,ht]),_:1},8,["disabled"])),[[t(S),{disabled:!t(f),text:t(f)?"":t(b).zk84}]]),I((o(),N(t(T),{disabled:!t(C),class:"k-button",type:"warning",onClick:a[0]||(a[0]=e=>R("FREE"))},{default:d(()=>[s("img",{src:t(y)(t(u).ICON.SKIN_LOTTERY_COIN),alt:"",class:"icon"},null,8,ft),kt,It]),_:1},8,["disabled"])),[[t(S),{disabled:!t(C),text:t(C)?"":t(b).c2y9}]])],64)):(o(),i(k,{key:1},[I((o(),N(t(T),{class:"k-button",type:"warning",disabled:!t(L),onClick:g},{default:d(()=>[s("img",{src:t(y)(t(u).ICON.SKIN_LOTTERY_STONE),alt:"",class:"icon"},null,8,Nt),St,bt]),_:1},8,["disabled"])),[[t(S),{disabled:!t(L),text:t(L)?"":t(b).zk84}]]),I((o(),N(t(T),{disabled:!t(O),class:"k-button",type:"warning",onClick:a[1]||(a[1]=e=>R("DEDUCTION"))},{default:d(()=>[s("img",{src:t(y)(t(u).ICON.SKIN_LOTTERY_STONE),alt:"",class:"icon"},null,8,Tt),xt,Ct]),_:1},8,["disabled"])),[[t(S),{disabled:!t(O),text:t(O)?"":t(b).c2y9}]])],64))])]),s("div",{class:"waves",style:P(`--height:${t(h)/2}%`)},[(o(),i(k,null,K(50,(e,m)=>s("div",{key:m,style:P({animationDelay:m*.05+"s"}),class:"wave"},null,4)),64))],4)])]))}}),Ot=z(Lt,[["__scopeId","data-v-58216f69"]]),gt={class:"seize-treasures"},Et={class:"main"},wt=M({name:"LotterySkin",__name:"index",setup(p){const{playAudio:_}=$();return j(()=>{_("bq69")}),(h,x)=>(o(),i("div",gt,[r(w,{name:"to-bottom",appear:""},{default:d(()=>[r(Z,{type:"SKIN"})]),_:1}),s("div",Et,[r(w,{name:"to-right-opacity",appear:""},{default:d(()=>[r(Ot)]),_:1}),r(w,{name:"to-left-opacity",appear:""},{default:d(()=>[r(tt,{type:"SKIN"})]),_:1})])]))}}),Bt=z(wt,[["__scopeId","data-v-38f63f7f"]]);export{Bt as default};
