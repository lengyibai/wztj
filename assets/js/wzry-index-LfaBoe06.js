import{l as D,M as T,u as e,C as l,D as f,H as a,S as O,P as x,Q as k,X as J,r as d,a as X,O as r,w as Y,y as j,x as Z,U as ee,W as oe,F as te,L as se,E as ae,T as F}from"./wzry-wzry_vue-ZP7q88Pe.js";import{s as A,e as ne,u as re}from"./wzry-wzry_vuePlugin-8reJzXjy.js";import{aM as ie,H as ce,n as K,t as le,I as ue,J as de,q as I,by as z,aR as pe,ay as B,aP as _e,o as me,aQ as he,U as ve,aS as fe,z as ge,ag as be,l as Se,k as G,am as U,ac as V,an as Ee}from"./wzry-index-O-tmU9-f.js";import{v as Te}from"./wzry-sweep-light-5lryGx6M.js";import{F as ke,K as ye}from"./wzry-index-JMl6VVSm.js";import{F as Re}from"./wzry-index-jh5mX5FK.js";import{L as He}from"./wzry-index-2j2SS27Y.js";/* empty css                                                                   */import"./wzry-wzry_axios-wVsZAsRs.js";import"./wzry-wzry_dayjs-p57Mk9r_.js";import"./wzry-wzry_lodash-4gQjN7DL.js";import"./wzry-wzry_i18n-x0daaVag.js";const Le={class:"hero-card"},we={class:"id"},$e={class:"select-mask"},xe=["src"],Be={class:"bottom"},De=["innerHTML"],Ie={class:"price"},Pe=["src"],Ce={class:"count"},Ne=D({__name:"index",props:{data:{}},emits:["exchange"],setup(P,{emit:h}){const v=h,i=t=>{v("exchange",t)};return(t,p)=>T((l(),f("div",Le,[a("span",we,"No."+O(t.data.id),1),a("div",$e,[T((l(),x(e(ce),{class:"k-button",type:"warning",onClick:p[0]||(p[0]=u=>i(t.data))},{default:k(()=>[J(" 点击兑换 ")]),_:1})),[[e(K)]])]),T(a("img",{class:"bg",src:t.data.coverBlur},null,8,xe),[[e(le),{img:t.data.cover}]]),a("div",Be,[a("div",{class:"name",innerHTML:t.data.name},null,8,De),a("div",Ie,[a("img",{src:e(ue)(e(de).ICON.HERO_DEBRIS),alt:"",class:"icon"},null,8,Pe),a("div",Ce,O(t.data.price),1)])])])),[[e(ie),{color:"#000"}],[e(Te)]])}}),Me=I(Ne,[["__scopeId","data-v-0308fb0c"]]),Oe={class:"hero-toolbar"},Fe={class:"filter-select"},Ge=D({__name:"index",emits:["change"],setup(P,{expose:h,emit:v}){const i=v,t=z(),{price_type:p}=A(t),u=["全部价格","由低到高","由高到低"],_=d(""),y=X([]);pe().then(s=>{s.forEach(n=>{y.push({label:n.value,value:n.value})})});const m=()=>{_.value="",i("change")},R=s=>{t.sortPrice(u[s]),m()},H=s=>{t.filterGender(s),m()},g=B(()=>{t.searchHero(_.value),i("change")},500);return h({_clearName:m}),(s,n)=>(l(),f("div",Oe,[a("div",Fe,[r(e(_e),{options:u,"sort-text":e(p),onSelect:R},null,8,["sort-text"])]),r(e(ke),{onChange:H}),T(r(e(he),{modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=b=>_.value=b),required:!1,class:"k-input",placeholder:"英雄/字母","no-special":!1,onInput:e(g)},null,8,["modelValue","onInput"]),[[e(K),{text:e(me).kb43,type:"INPUT"}]])]))}}),Ue=I(Ge,[["__scopeId","data-v-0ea70d4e"]]),Ve={class:"hero"},Ae={class:"hero__main"},Ke=D({name:"HeroDebrisShop",__name:"index",setup(P){const h=ne(),v=re(),i=ve(),t=z(),{scroll:p,show_list:u,finish:_,loading:y}=A(t),{playAudio:m}=Se(),{page_count:R}=fe(),H=[[2200,8],[1800,7],[1600,6],[1400,5],[1024,4],[720,3],[480,2]],g=d(),s=d(),n=d(0),b=d(!1),C=d(!1),N=d(!1);t.getHeroList();const L=()=>{const o=window.innerWidth;o>=2200&&(n.value=9);for(const[c,E]of H)o<c&&(n.value=E)},S=B(()=>{m("n4r4")},100),w=B(o=>{t.setScroll(o),N.value=o>250},250),q=()=>{var o;(o=s.value)==null||o._setPosition(0,!0)},Q=()=>{var o;w(0),(o=g.value)==null||o._clearName()},W=o=>{i.articles.HERO_DEBRIS>=Number(o.price)?G({text:U("r36m",{name:o.name,prop:V.HERO_DEBRIS,count:o.price}),confirm(){i.setGamePropNum("HERO_DEBRIS",Number(o.price),"SUB").then(()=>{i.addHero(o.id)})}}):G({text:U("p89n",{prop:V.HERO_DEBRIS}),confirm(){v.push(Ee.HERO_LOTTERY)}})};return Y(()=>h.query,o=>{o.id?setTimeout(()=>{b.value=!0},100):b.value=!1},{immediate:!0}),j(async()=>{var o;L(),window.addEventListener("resize",L),m("h3w0"),(o=s.value)==null||o._setPosition(p.value),await ge(250),C.value=!0}),Z(()=>{window.removeEventListener("resize",L)}),(o,c)=>(l(),f("div",Ve,[a("div",Ae,[r(ee,{name:"to-bottom",appear:""},{default:k(()=>[r(Ue,{ref_key:"heroToolbarRef",ref:g,onChange:c[0]||(c[0]=E=>e(w)(0))},null,512)]),_:1}),r(e(ye),{active:N.value,onBackTop:q},null,8,["active"]),e(u).length&&C.value?(l(),x(e(He),{key:0,ref_key:"heroListRef",ref:s,finish:e(_),loading:e(y),gap:"1rem",count:n.value,onScroll:e(w),onLoadMore:e(t).loadMore},{default:k(()=>[r(oe,{name:"card",appear:""},{default:k(()=>[(l(!0),f(te,null,ae(e(u),(E,M)=>(l(),f("div",{key:M,class:"hero-card",style:se({"transition-delay":M%e(R)*.025+"s"}),onMouseenter:c[1]||(c[1]=(...$)=>e(S)&&e(S)(...$)),"on@touchstart":c[2]||(c[2]=(...$)=>e(S)&&e(S)(...$))},[r(Me,{data:E,onExchange:W},null,8,["data"])],36))),128))]),_:1})]),_:1},8,["finish","loading","count","onScroll","onLoadMore"])):F("",!0),e(u).length===0?(l(),x(e(be),{key:1,tip:"暂无可兑换英雄"})):F("",!0)]),r(e(Re),{type:"heroDebris",onChange:Q})]))}}),so=I(Ke,[["__scopeId","data-v-079f661c"]]);export{so as default};
