import{l as N,M as f,u as c,C as t,D as l,H as r,T as g,P as y,Q as m,X as R,r as u,j as B,y as C,x as M,O as h,W as A,F as O,L as P,E as I,U as D}from"./wzry-wzry_vue-ZP7q88Pe.js";import{u as G}from"./wzry-wzry_vuePlugin-8reJzXjy.js";import{aM as K,t as z,H as U,n as V,q as b,U as F,z as W,ag as Y,l as j,bx as q,k as T,am as E,ac as $,an as Q}from"./wzry-index-O-tmU9-f.js";import{L as X}from"./wzry-index-2j2SS27Y.js";/* empty css                                                                   */import"./wzry-wzry_axios-wVsZAsRs.js";import"./wzry-wzry_dayjs-p57Mk9r_.js";import"./wzry-wzry_lodash-4gQjN7DL.js";import"./wzry-wzry_i18n-x0daaVag.js";const J={class:"skin-card"},Z=["src"],ee=["src"],se={class:"bottom"},te=["innerHTML"],ae=["innerHTML"],ne={class:"tool"},oe=N({__name:"index",props:{data:{}},emits:["exchange"],setup(w,{emit:_}){const n=_,p=(e,o)=>{n("exchange",e,o)};return(e,o)=>f((t(),l("div",J,[f(r("img",{class:"bg",src:e.data.posterBlur},null,8,Z),[[c(z),{img:e.data.cover}]]),e.data.link?(t(),l("img",{key:0,class:"type",src:e.data.link},null,8,ee)):g("",!0),r("div",se,[r("div",{class:"name",innerHTML:e.data.name},null,8,te),r("div",{class:"mark",innerHTML:`——${e.data.heroName}`},null,8,ae)]),r("div",ne,[f((t(),y(c(U),{type:"warning",class:"k-button",onClick:o[0]||(o[0]=i=>p(i,e.data))},{default:m(()=>[R(" 点击兑换 ")]),_:1})),[[c(V)]])])])),[[c(K)]])}}),ie=b(oe,[["__scopeId","data-v-dfe4457b"]]),re={class:"skin"},ce={class:"skin-main"},le=N({name:"HonorCrystal",__name:"index",setup(w){const _=G(),n=F(),{playAudio:p}=j(),e=[[2400,5],[2e3,4],[1600,3],[1400,2],[720,1]],o=u(),i=u(0),L=u(!1),S=u([]),k=B(()=>S.value.filter(s=>s.type===26&&!n.skin_list.includes(s.id)));(async()=>{S.value=await q()})();const v=()=>{const s=document.documentElement.clientWidth;s>=2400&&(i.value=5);for(const[a,d]of e)s<a&&(i.value=d)},x=(s,a)=>{n.articles.SKIN_DEBRIS>=Number(a.debris)?T({text:E("r36m",{name:`${a.heroName}-${a.name}`,prop:$.KING_CRYSTAL,count:1}),confirm(){n.setGamePropNum("HONOR_CRYSTAL",1,"SUB").then(()=>{n.addSkin(a.id,s)})}}):T({text:E("p89n",{prop:$.HERO_DEBRIS}),confirm(){_.push(Q.PROP_SHOP)}})};return C(async()=>{p("h3w0"),v(),window.addEventListener("resize",v),await W(250),L.value=!0}),M(()=>{window.removeEventListener("resize",v)}),(s,a)=>(t(),l("div",re,[r("div",ce,[h(D,{name:"card-list"},{default:m(()=>[k.value.length&&L.value?(t(),y(c(X),{key:0,ref_key:"skinListRef",ref:o,gap:"1rem",count:i.value,"load-more":!1},{default:m(()=>[h(A,{name:"skin-card",appear:""},{default:m(()=>[(t(!0),l(O,null,I(k.value,(d,H)=>(t(),l("div",{key:d.id,class:"skin-card",style:P({"transition-delay":H%(i.value*2)*.1+"s"})},[h(ie,{data:d,onExchange:x},null,8,["data"])],4))),128))]),_:1})]),_:1},8,["count"])):g("",!0)]),_:1}),k.value.length===0?(t(),y(c(Y),{key:0,tip:"暂无可兑换皮肤"})):g("",!0)])]))}}),ye=b(le,[["__scopeId","data-v-27dcc3bb"]]);export{ye as default};
