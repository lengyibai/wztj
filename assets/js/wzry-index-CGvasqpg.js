import{k as B,M as T,u as e,E as b,F as u,J as a,V as C,P as $,Q as y,X as z,r as _,d as J,O as r,i as Q,w as W,y as X,S as O,T as j,W as Z,H as ee,I as oe,L as se}from"./wzry-wzry_vue-BEC82j21.js";import{s as G,e as te,u as ae}from"./wzry-wzry_vuePlugin-DfAOYnI4.js";import{aH as re,y as ne,b as K,s as ie,F as le,G as ce,p as I,bu as A,aM as ue,aC as x,aK as de,M as pe,aL as me,Y as _e,e as he,aN as fe,ad as ve,o as w,ai as V,a9 as F,ak as ge,x as be}from"./wzry-index-CTpLHwAa.js";import{v as Se}from"./wzry-sweep-light-kDX43eZR.js";import{K as ke}from"./wzry-index-B-RbYMYs.js";import{F as Ee,K as Re}from"./wzry-index-tyIRwcPb.js";import{u as Te}from"./wzry-index.vue_vue_type_style_index_0_scoped_308049e9_lang-CBrt823u.js";import{F as ye}from"./wzry-index-quQVn9Fg.js";import{L as He}from"./wzry-index-P8-khLHq.js";import"./wzry-wzry_axios-ChA_wbf5.js";import"./wzry-wzry_dayjs-RHYc_Oz-.js";import"./wzry-wzry_lodash-BosuxZz1.js";import"./wzry-wzry_pinyin_pro-BOs0bO5i.js";import"./wzry-wzry_i18n-D3aQbx8W.js";import"./wzry-wzry_vueuse-Dl7OonR3.js";import"./wzry-index-CtFj8Xvm.js";const Le={class:"hero-card"},Ne={class:"id"},$e={class:"select-mask"},xe=["src"],Be={class:"bottom"},Ie=["innerHTML"],Pe={class:"price"},De=["src"],Me={class:"count"},Ce=B({__name:"index",props:{data:{}},emits:["exchange"],setup(P,{emit:h}){const f=h,i=s=>{f("exchange",s)};return(s,l)=>T((u(),b("div",Le,[a("span",Ne,"No."+C(s.data.id),1),a("div",$e,[T((u(),$(e(ne),{class:"k-button",type:"warning",onClick:l[0]||(l[0]=c=>i(s.data))},{default:y(()=>l[1]||(l[1]=[z(" 点击兑换 ")])),_:1,__:[1]})),[[e(K)]])]),T(a("img",{class:"bg",src:s.data.coverBlur},null,8,xe),[[e(ie),{img:s.data.cover}]]),a("div",Be,[a("div",{class:"name",innerHTML:s.data.name},null,8,Ie),a("div",Pe,[a("img",{src:e(le)(e(ce).ICON.HERO_DEBRIS),alt:"",class:"icon"},null,8,De),a("div",Me,C(s.data.price),1)])])])),[[e(re),{color:"#000"}],[e(Se)]])}}),Oe=I(Ce,[["__scopeId","data-v-45d4e930"]]),we={class:"hero-toolbar"},Ve={class:"filter-select"},Fe=B({__name:"index",emits:["change"],setup(P,{expose:h,emit:f}){const i=f,s=A(),{price_type:l,gender_type:c}=G(s),S=["全部价格","由低到高","由高到低"],d=_(""),k=J([]);ue().then(n=>{n.forEach(t=>{k.push({label:t.value,value:t.value})})});const v=()=>{d.value="",i("change")},H=n=>{s.sortPrice(S[n]),v()},E=n=>{s.filterGender(n),v()},g=x(()=>{s.searchHero(d.value),i("change")},500);return h({_clearName:v}),(n,t)=>(u(),b("div",we,[r(e(ke),{"prop-key":"HERO_DEBRIS",height:"3rem",class:"k-prop-num","margin-right":"1rem"}),a("div",Ve,[r(e(de),{options:S,"sort-text":e(l),onSelect:H},null,8,["sort-text"])]),r(e(Ee),{modelValue:e(c),"onUpdate:modelValue":[t[0]||(t[0]=p=>Q(c)?c.value=p:null),E]},null,8,["modelValue"]),T(r(e(me),{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=p=>d.value=p),required:!1,class:"k-input",placeholder:"英雄/字母","no-special":!1,onInput:e(g)},null,8,["modelValue","onInput"]),[[e(K),{text:e(pe).kb43,type:"INPUT"}]])]))}}),Ge=I(Fe,[["__scopeId","data-v-bc1c0509"]]),Ke={class:"hero"},Ae={class:"hero__main"},Ue=B({name:"HeroDebrisShop",__name:"index",setup(P){const h=te(),f=ae(),i=_e(),s=A(),{scroll:l,show_list:c,finish:S,loading:d}=G(s),{playAudio:k}=he(),{page_count:v}=fe(),{line_num:H}=Te(9,[[2200,8],[1800,7],[1600,6],[1400,5],[1024,4],[720,3],[480,2]]),E=_(),g=_(),n=_(!1),t=_(!1),p=_(!1);s.getHeroList();const R=x(()=>{k("n4r4")},100),L=x(o=>{s.setScroll(o),p.value=o>250},250),U=()=>{var o;(o=g.value)==null||o._setPosition(0,!0)},q=()=>{var o;L(0),(o=E.value)==null||o._clearName()},Y=o=>{i.articles.HERO_DEBRIS>=Number(o.price)?w({text:V("r36m",{name:o.name,prop:F.HERO_DEBRIS,count:o.price}),confirm(){i.setGamePropNum("HERO_DEBRIS",Number(o.price),"SUB").then(()=>{i.addHero(o.id)})}}):w({text:V("p89n",{prop:F.HERO_DEBRIS}),confirm(){f.push(ge.HERO_LOTTERY)}})};return W(()=>h.query,o=>{o.id?setTimeout(()=>{n.value=!0},100):n.value=!1},{immediate:!0}),X(async()=>{var o;k("h3w0"),(o=g.value)==null||o._setPosition(l.value),await be(250),t.value=!0}),(o,m)=>(u(),b("div",Ke,[a("div",Ae,[r(j,{name:"to-bottom",appear:""},{default:y(()=>[r(Ge,{ref_key:"heroToolbarRef",ref:E,onChange:m[0]||(m[0]=D=>e(L)(0))},null,512)]),_:1}),r(e(Re),{active:p.value,onBackTop:U},null,8,["active"]),e(c).length&&t.value?(u(),$(e(He),{key:0,ref_key:"heroListRef",ref:g,finish:e(S),loading:e(d),gap:"1rem",count:e(H),onScroll:e(L),onLoadMore:e(s).loadMore},{default:y(()=>[r(Z,{name:"card",appear:""},{default:y(()=>[(u(!0),b(ee,null,oe(e(c),(D,M)=>(u(),b("div",{key:M,class:"hero-card",style:se({"transition-delay":M%e(v)*.025+"s"}),onMouseenter:m[1]||(m[1]=(...N)=>e(R)&&e(R)(...N)),"on@touchstart":m[2]||(m[2]=(...N)=>e(R)&&e(R)(...N))},[r(Oe,{data:D,onExchange:Y},null,8,["data"])],36))),128))]),_:1})]),_:1},8,["finish","loading","count","onScroll","onLoadMore"])):O("",!0),e(c).length===0?(u(),$(e(ve),{key:1,tip:"暂无可兑换英雄"})):O("",!0)]),r(e(ye),{type:"heroDebris",onChange:q})]))}}),io=I(Ue,[["__scopeId","data-v-52565a15"]]);export{io as default};
