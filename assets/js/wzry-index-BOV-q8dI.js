import{k as V,M as b,u as e,E as f,F as r,S as R,J as m,P as I,Q as N,X as D,r as S,O as o,i as J,w as Q,n as B,y as X,T as w,H as j,I as W,L as Z}from"./wzry-wzry_vue-BEC82j21.js";import{s as P,u as ee}from"./wzry-wzry_vuePlugin-DfAOYnI4.js";import{aH as ae,s as te,y as se,b as H,p as M,bs as Y,aC as U,aK as oe,M as ne,aL as ie,Y as re,e as le,ad as ce,o as E,ai as F,a9 as G,ak as ue,x as de}from"./wzry-index-CTpLHwAa.js";import{F as me,K as pe}from"./wzry-index-tyIRwcPb.js";import{K as _e}from"./wzry-index-B-RbYMYs.js";import{u as fe}from"./wzry-index.vue_vue_type_style_index_0_scoped_308049e9_lang-CBrt823u.js";import{L as ke,v as ve}from"./wzry-index-DOb7V6j6.js";import{F as he}from"./wzry-index-quQVn9Fg.js";import"./wzry-wzry_axios-ChA_wbf5.js";import"./wzry-wzry_dayjs-RHYc_Oz-.js";import"./wzry-wzry_lodash-BosuxZz1.js";import"./wzry-wzry_pinyin_pro-BOs0bO5i.js";import"./wzry-wzry_i18n-D3aQbx8W.js";import"./wzry-wzry_vueuse-Dl7OonR3.js";import"./wzry-index-CtFj8Xvm.js";const ge={class:"skin-card"},ye=["src"],Te=["src"],Se={class:"bottom"},be=["innerHTML"],Ce=["innerHTML"],Le={class:"tool"},Ne=V({__name:"index",props:{data:{}},emits:["exchange"],setup($,{emit:k}){const v=k,l=(t,s)=>{v("exchange",t,s)};return(t,s)=>b((r(),f("div",ge,[b(m("img",{class:"bg",src:t.data.posterBlur},null,8,ye),[[e(te),{img:t.data.cover}]]),t.data.link?(r(),f("img",{key:0,class:"type",src:t.data.link},null,8,Te)):R("",!0),m("div",Se,[m("div",{class:"name",innerHTML:t.data.name},null,8,be),m("div",{class:"mark",innerHTML:`——${t.data.heroName}`},null,8,Ce)]),m("div",Le,[b((r(),I(e(se),{type:"warning",class:"k-button",onClick:s[0]||(s[0]=c=>l(c,t.data))},{default:N(()=>s[1]||(s[1]=[D(" 点击兑换 ")])),_:1,__:[1]})),[[e(H)]])])])),[[e(ae)]])}}),$e=M(Ne,[["__scopeId","data-v-32a6a974"]]),xe={class:"skin-toolbar"},Ke={class:"filter-select"},Re=V({__name:"index",emits:["change"],setup($,{expose:k,emit:v}){const l=v,t=Y(),{skin_type:s,skin_type_list:c,gender_type:h}=P(t),{filterSkinType:x,filterGender:K,searchSkin:C}=t,u=S(""),n=()=>{u.value="",l("change")},d=p=>{x(c.value[p]),n()},L=p=>{K(p),n()},g=U(()=>{C(u.value),l("change")},500);return k({_clearName:n}),(p,_)=>(r(),f("div",xe,[o(e(_e),{"prop-key":"KING_CRYSTAL",class:"k-prop-num",height:"3rem","margin-right":"1rem"}),m("div",Ke,[o(oe,{options:e(c),"sort-text":e(s),"list-height":"26.5625rem","min-width":"8.5rem",onSelect:d},null,8,["options","sort-text"])]),o(me,{modelValue:e(h),"onUpdate:modelValue":[_[0]||(_[0]=y=>J(h)?h.value=y:null),L]},null,8,["modelValue"]),b(o(e(ie),{modelValue:u.value,"onUpdate:modelValue":_[1]||(_[1]=y=>u.value=y),required:!1,class:"k-input",placeholder:"英雄/皮肤","no-special":!1,onInput:e(g)},null,8,["modelValue","onInput"]),[[e(H),{text:e(ne).kb43,type:"INPUT"}]])]))}}),Ie=M(Re,[["__scopeId","data-v-a3cd2aa5"]]),Ve={class:"skin"},Me={class:"skin-main"},Ae=V({name:"KingCrystal",__name:"index",props:{visible:{type:Boolean}},setup($){const k=$,v=ee(),l=re(),t=Y(),{scroll:s,show_list:c,finish:h,loading:x}=P(t),{playAudio:K}=le(),{line_num:C}=fe(4,[[2e3,4],[1600,3],[1400,2],[720,1]]),u=S(),n=S(),d=S(!1),L=S(!1);t.getSkin();const g=U(a=>{t.setScroll(a),L.value=a>250},250),p=()=>{g(0),d.value=!1,B(()=>{d.value=!0})},_=()=>{var a;p(),(a=u.value)==null||a._clearName()},y=(a,i)=>{l.articles.KING_CRYSTAL>0?E({text:F("r36m",{name:`${i.heroName}-${i.name}`,prop:G.KING_CRYSTAL,count:1}),confirm(){l.setGamePropNum("KING_CRYSTAL",1,"SUB").then(()=>{var T;l.addSkin(i.id,a),(T=u.value)==null||T._clearName()})}}):E({text:F("p89n",{prop:G.KING_CRYSTAL}),confirm(){v.push(ue.HERO_LOTTERY)}})},O=()=>{t.loadMore().then(()=>{var a;(a=n.value)==null||a._updateStatus()})},q=()=>{var a;(a=n.value)==null||a._setPosition(0,!1)};return Q(()=>k.visible,a=>{d.value=a,B(()=>{var i;(i=n.value)==null||i._setPosition(s.value)})}),X(async()=>{var a;K("h3w0"),(a=n.value)==null||a._setPosition(s.value),await de(250),d.value=!0}),(a,i)=>(r(),f("div",Ve,[m("div",Me,[o(w,{name:"to-bottom",appear:""},{default:N(()=>[o(Ie,{ref_key:"skinToolbarRef",ref:u,onChange:i[0]||(i[0]=T=>e(g)(0))},null,512)]),_:1}),o(e(pe),{active:L.value,onBackTop:q},null,8,["active"]),o(w,{name:"fade"},{default:N(()=>[e(c).length&&d.value?(r(),I(e(ke),{key:0,ref_key:"libVirtualListRef",ref:n,data:e(c),"column-count":e(C),loading:e(x),finish:e(h),onScroll:e(g),onLoadMore:O},{default:N(({data:T})=>[(r(!0),f(j,null,W(T,(A,z)=>b((r(),f("div",{key:A.id,ref_for:!0,ref:"skinCardRefs",class:"skin-card",style:Z({"transition-delay":z%(e(C)*2)*.1+"s"})},[o($e,{data:A,onExchange:y},null,8,["data"])],4)),[[e(ve)]])),128))]),_:1},8,["data","column-count","loading","finish","onScroll"])):R("",!0)]),_:1}),e(c).length===0?(r(),I(e(ce),{key:0,tip:"暂无可兑换皮肤"})):R("",!0)]),o(e(he),{type:"kingCrystal",onChange:_})]))}}),Xe=M(Ae,[["__scopeId","data-v-c13426eb"]]);export{Xe as default};
