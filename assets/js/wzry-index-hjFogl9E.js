import{k as _e,r as R,c as x,w as z,y as le,x as ce,E as m,F as u,O as D,P as j,S as K,Q as L,M as v,J as i,L as X,H as ue,I as de,u as t,G as Ee,V as h,T as P,N as Oe,X as pe,n as F}from"./wzry-wzry_vue-BEC82j21.js";import{u as Te,s as Re}from"./wzry-wzry_vuePlugin-DfAOYnI4.js";import{Y as me,A as ve,a8 as Se,e as Ne,aC as fe,F as J,G as S,b as Q,r as Ie,aP as Le,y as ye,ad as Ae,ak as n,b4 as Ce,b5 as ke,b6 as He,o as y,ai as A,b7 as q,$ as B,k as G,b8 as Z,b3 as xe,p as De}from"./wzry-index-CTpLHwAa.js";import{u as Ke,a as he}from"./wzry-useDialogSwitch-jpZVAMt0.js";import{d as ee}from"./wzry-wzry_dayjs-RHYc_Oz-.js";import"./wzry-wzry_axios-ChA_wbf5.js";import"./wzry-wzry_lodash-BosuxZz1.js";import"./wzry-wzry_pinyin_pro-BOs0bO5i.js";import"./wzry-wzry_i18n-D3aQbx8W.js";import"./wzry-wzry_vueuse-Dl7OonR3.js";const Pe={key:0,class:"article-list"},Be=["onClick"],Ge=["src"],Ye=["data-text"],be={key:0,class:"article-detail"},Ue={class:"name"},we={class:"have"},ge={class:"num"},Me={class:"desc"},$e=_e({name:"Knapsack",__name:"index",setup(Ve){var V,W;const te=Te(),d=me(),_=ve(),ae=Se(),{knapsack:l}=Re(d),{playAudio:E}=Ne(),c=R(),N=R(),r=R((V=l.value[0])==null?void 0:V[0]),C=R((W=l.value[0])==null?void 0:W[0]),k=R({left:0,top:0}),{enableRadialBorder:Y,disableRadialBorder:b}=Ke(N),U=x(()=>l.value.findIndex(e=>e[0]===r.value)),w=x(()=>{var e;return(e=l.value[U.value])==null?void 0:e[1]}),g=x(()=>l.value.length===0),M=e=>{r.value=e,$(),c.value.style.transform="scale(0.75)",c.value.style.opacity="0.5",setTimeout(()=>{c.value.style.transform="scale(1)",c.value.style.opacity="1"},250),F(()=>{C.value=e,E("n4r4")})},se=e=>{const s={HERO_DEBRIS:n.HERO_DEBRIS,SKIN_DEBRIS:n.SKIN_DEBRIS,KING_CRYSTAL:n.KING_CRYSTAL,HONOR_CRYSTAL:n.HONOR_CRYSTAL,HERO_LOTTERY_STONE:n.HERO_LOTTERY,SKIN_LOTTERY_STONE:n.SKIN_LOTTERY,HERO_LOTTERY_COIN:n.HERO_LOTTERY,SKIN_LOTTERY_COIN:n.SKIN_LOTTERY,GUESS_COIN:n.YI_BAO,JUMP_COIN:n.YI_BAO};if(Object.keys(s).includes(e)){te.push(s[e]);return}const a={HERO_CHEST_OPTIONAL:"HERO",SKIN_CARD_INITIAL:"INITIAL",SKIN_CHEST_BRAVE_OPTIONAL:"BRAVE",SKIN_CHEST_EPIC_OPTIONAL:"EPIC",SKIN_CHEST_LEGEND_OPTIONAL:"LEGEND",SKIN_CHEST_LIMIT_OPTIONAL:"LIMIT"};if(Object.keys(a).includes(e)){Ce(a[e]);return}if(["HERO_EXP_ONE","HERO_EXP_TWO"].includes(e)){ke(e);return}if(["BLESSING_BAG","HERO_CHEST_RANDOM","HERO_TREASURE","SKIN_BRAVE_TREASURE","SKIN_EPIC_TREASURE","SKIN_LEGEND_TREASURE","SKIN_LIMIT_TREASURE"].includes(e)){He(e);return}if(["HERO_LOTTERY_WEEK","SKIN_LOTTERY_WEEK"].includes(e)){const o=e==="HERO_LOTTERY_WEEK"?"HERO":"SKIN",T=o==="HERO"?"英雄夺宝石周卡":"皮肤夺宝石周卡",O=o==="HERO"?"HERO_LOTTERY_STONE":"SKIN_LOTTERY_STONE",H=o==="HERO"?"HERO_LOTTERY_COIN":"SKIN_LOTTERY_COIN",I=o==="HERO"?"heroLotteryStoneWeekCardExpireTime":"skinLotteryStoneWeekCardExpireTime",re=o==="HERO"?"英雄夺宝石周卡奖励发放":"皮肤夺宝石周卡奖励发放";if(_.user_data[I]!==0){y({text:A("jt83",{v:T}),confirm(){const ie=_.user_data[I];_.updateUserData({[I]:q(ie+6048e5)}),d.setGamePropNum(e,1,"SUB"),E("wm14"),B(G.ep96)}});return}y({text:A("m2x2",{v:T}),confirm(){_.updateUserData({[I]:q(ee().valueOf()+6048e5)}),d.setGamePropNum(e,1,"SUB"),E("wm14"),B(G.fo08),ae.sendGiftMail({title:re,desc:"别忘了明天0点之前也来领取哦！",props:[{key:O,num:Z[o].STONE},{key:H,num:Z[o].COIN}]})}});return}if(["DOUBLE_GOLD","DOUBLE_EXP"].includes(e)){const o=e==="DOUBLE_GOLD"?"GOLD":"EXP",T=o==="GOLD"?"双倍金币卡":"双倍经验卡",O=o==="GOLD"?"doubleGoldCardExpireTime":"doubleExpCardExpireTime";if(_.user_data[O]!==0){y({text:A("jt83",{v:T}),confirm(){const H=_.user_data[O];_.updateUserData({[O]:H+864e5}),d.setGamePropNum(e,1,"SUB"),E("wm14"),B(G.fo08)}});return}y({text:A("m2x2",{v:T}),confirm(){_.updateUserData({[O]:ee().valueOf()+864e5}),d.setGamePropNum(e,1,"SUB"),E("wm14")}});return}e==="GUESS_CARD"&&he().setActivityShow(!0)},$=()=>{F(()=>{var p;const e=U.value;if(e===-1||!((p=N.value)!=null&&p.length)){c.value&&(c.value.style.opacity="0");return}const s=N.value[e],a=xe(s,"article");c.value.style.opacity="1",k.value={left:a.offsetLeft,top:a.offsetTop}})},f=fe($,500);return z(w,()=>{d.articles[r.value]===0&&M(l.value[0][0])}),z(()=>l.value.length,f),le(()=>{window.addEventListener("resize",f),f(),E("fz02")}),ce(()=>{window.removeEventListener("resize",f)}),(e,s)=>(u(),m("div",{class:"knapsack",onMouseenter:s[1]||(s[1]=(...a)=>t(Y)&&t(Y)(...a)),onMouseleave:s[2]||(s[2]=(...a)=>t(b)&&t(b)(...a))},[D(P,{name:"to-right-opacity",appear:""},{default:L(()=>[g.value?K("",!0):v((u(),m("div",Pe,[i("div",{ref_key:"shineRoundRef",ref:c,class:"shine-round",style:X({left:k.value.left+"px",top:k.value.top+"px"})},null,4),(u(!0),m(ue,null,de(t(l),(a,p)=>v((u(),m("div",{key:p,ref_for:!0,ref_key:"articleRefs",ref:N,class:Ee(["article",{active:r.value===a[0]}]),onClick:oe=>M(a[0])},[i("img",{src:t(J)(t(S).ICON[a[0]]),alt:""},null,8,Ge),i("div",{class:"num","data-text":a[1]},h(a[1]),9,Ye)],10,Be)),[[t(Q),{text:t(S).NAME[a[0]]}]])),128))])),[[t(Ie)]])]),_:1}),D(P,{name:"to-top-opacity",appear:""},{default:L(()=>[r.value?(u(),m("div",be,[D(P,{name:"fade"},{default:L(()=>[v(i("div",{class:"icon",style:X({backgroundImage:`url(${t(J)(t(S).ICON[C.value])})`})},null,4),[[Oe,C.value===r.value]])]),_:1}),i("div",Ue,h(t(S).NAME[r.value]),1),i("div",we,[s[3]||(s[3]=i("div",{class:"text"},"拥有",-1)),v(i("div",ge,null,512),[[t(Le),{num:w.value,once:!1}]])]),i("div",Me,h(t(S).DESC[r.value]),1),v((u(),j(t(ye),{type:"warning",class:"k-button",onClick:s[0]||(s[0]=a=>se(r.value))},{default:L(()=>s[4]||(s[4]=[pe(" 使用 ")])),_:1,__:[4]})),[[t(Q)]])])):K("",!0)]),_:1}),g.value?(u(),j(t(Ae),{key:0,tip:"背包居然是空的！"})):K("",!0)],32))}}),st=De($e,[["__scopeId","data-v-62a48e64"]]);export{st as default};
